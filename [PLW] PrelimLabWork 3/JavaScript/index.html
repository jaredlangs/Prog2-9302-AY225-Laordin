<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Minimal Prelim Grade Calculator">
    <title>Prelim Grade Calculator</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="container">
        <div class="card">

            <div class="header-section">
                <h1>Prelim Grade Calculator</h1>
                <p class="subtitle">Calculate the required Prelim Exam score for your target grade.</p>
            </div>

            <div class="content-grid">
                <!-- Left Column: Inputs -->
                <div class="form-section">
                    <h2>üìù Student Grades</h2>

                    <form id="gradeForm">
                        <div class="input-group">
                            <label for="studentName">Student Name</label>
                            <div class="input-wrapper">
                                <input type="text" id="studentName" placeholder="Enter Name">
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="attendance">Attendance (Meetings)</label>
                            <div class="input-wrapper">
                                <input type="number" id="attendance" placeholder="1-4" min="1" max="4">
                                <span class="suffix">/ 4</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="lab1">Lab Work 1</label>
                            <div class="input-wrapper">
                                <input type="number" id="lab1" placeholder="0-100" min="0" max="100" step="0.01">
                                <span class="suffix">/ 100</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="lab2">Lab Work 2</label>
                            <div class="input-wrapper">
                                <input type="number" id="lab2" placeholder="0-100" min="0" max="100" step="0.01">
                                <span class="suffix">/ 100</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="lab3">Lab Work 3</label>
                            <div class="input-wrapper">
                                <input type="number" id="lab3" placeholder="0-100" min="0" max="100" step="0.01">
                                <span class="suffix">/ 100</span>
                            </div>
                        </div>

                        <div class="btn-group">
                            <button type="submit" class="btn-primary" id="calculateBtn">Calculate & Save</button>
                            <button type="button" class="btn-secondary" id="clearBtn">Clear</button>
                            <button type="button" class="btn-secondary" id="viewDbBtn">üìÇ Saved Records</button>
                        </div>
                    </form>
                </div>

                <!-- Right Column: Results -->
                <div id="results" class="results-section results-hidden">
                    <h2>üìä Grade Breakdown</h2>

                    <!-- Summary & Computed -->
                    <div class="result-card">
                        <div class="result-row">
                            <span class="result-label">Attendance:</span>
                            <span class="result-value" id="resAttendance">-</span>
                        </div>
                        <div class="result-row">
                            <span class="result-label">Attendance %:</span>
                            <span class="result-value" id="resAttendancePercent">-</span>
                        </div>
                        <div class="result-row"
                            style="margin-top: 10px; border-top: 1px solid #eee; padding-top: 10px;">
                            <span class="result-label">Lab 1:</span>
                            <span class="result-value" id="resLab1">-</span>
                        </div>
                        <div class="result-row">
                            <span class="result-label">Lab 2:</span>
                            <span class="result-value" id="resLab2">-</span>
                        </div>
                        <div class="result-row">
                            <span class="result-label">Lab 3:</span>
                            <span class="result-value" id="resLab3">-</span>
                        </div>
                        <div class="result-row" style="margin-top: 5px; border-top: 1px solid #eee; padding-top: 5px;">
                            <span class="result-label">Lab Average (60%):</span>
                            <span class="result-value" id="resLabAvg">-</span>
                        </div>
                        <div class="result-row">
                            <span class="result-label">Class Standing (CS):</span>
                            <span class="result-value-lg" id="resClassStanding">-</span>
                        </div>
                    </div>

                    <!-- Requirements -->
                    <div class="req-grid">
                        <div class="req-box passing" id="passingBox">
                            <span class="req-title">To Pass (75)</span>
                            <div id="passingContent">
                                <span class="req-score" id="resPassingLabel">-</span>
                            </div>
                        </div>
                        <div class="req-box excellent" id="excellentBox">
                            <span class="req-title">Excellent (100)</span>
                            <div id="excellentContent">
                                <span class="req-score" id="resExcellentLabel">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="remarks-area">
                        <p id="remarksText">Enter your grades to check requirements.</p>
                    </div>

                </div>
            </div>

            <!-- Database Modal -->
            <div id="dbModal" class="modal">
                <div class="modal-content">
                    <span class="close-modal">&times;</span>

                    <div class="database-section">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2 style="display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 1.5rem;">üìÇ</span>
                                Saved Records (Database)
                            </h2>
                            <div style="gap: 10px; display: flex;">
                                <button type="button" class="btn-secondary" onclick="clearDatabase()"
                                    style="padding: 8px 15px; font-size: 13px;">Clear DB</button>
                                <button type="button" class="btn-primary" onclick="exportCSV()"
                                    style="padding: 8px 15px; font-size: 13px; background: black; border-color: black;">Export
                                    CSV</button>
                            </div>
                        </div>

                        <div style="overflow-x: auto;">
                            <table id="recordsTable" style="width: 100%; border-collapse: collapse; font-size: 14px;">
                                <thead>
                                    <tr style="background: #f8f8f8; color: #666; text-align: left;">
                                        <th style="padding: 12px; border-bottom: 2px solid #ddd;">Name</th>
                                        <th style="padding: 12px; border-bottom: 2px solid #ddd;">CS</th>
                                        <th style="padding: 12px; border-bottom: 2px solid #ddd;">Required Exam</th>
                                        <th style="padding: 12px; border-bottom: 2px solid #ddd;">Status</th>
                                    </tr>
                                </thead>
                                <tbody id="recordsBody">
                                    <!-- Records will be injected here -->
                                    <tr>
                                        <td colspan="4" style="padding: 20px; text-align: center; color: #999;">No
                                            records found.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>